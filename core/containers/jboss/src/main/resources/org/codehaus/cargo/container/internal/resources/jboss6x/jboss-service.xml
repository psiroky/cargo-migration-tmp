<?xml version="1.0" encoding="UTF-8"?>

<!-- $Id$ -->

<!-- ===================================================================== -->
<!--  JBoss Server Configuration                                           -->
<!-- ===================================================================== -->

<server>

   <!-- Load all jars from the JBOSS_HOME/server/<config>/lib directory and
        the shared JBOSS_HOME/common/lib directory. This can be restricted to
        specific jars by specifying them in the archives attribute.
        TODO: Move this configuration elsewhere
   -->
   <classpath codebase="${jboss.server.lib.url}" archives="*"/>
   <classpath codebase="${jboss.common.lib.url}" archives="*"/>
   @jboss.shared.classpath@

   <!-- 
        JBAS-JBAS-7274. Temporary workaround to set java.rmi.server.codebase
        early in the startup process. Will be removed before AS 6.0.0.CR1
   -->
   <mbean code="org.jboss.web.RMICodebaseConfigurer"
      name="jboss:service=RMICodebaseConfigurer">
      
      <attribute name="CodebaseHost">${java.rmi.server.hostname}</attribute>      
      <attribute name="CodebasePort">
         <!-- Get the port to use from ServiceBindingManager. -->
         <value-factory bean="ServiceBindingManager" method="getIntBinding" parameter="jboss:service=WebService"/>
      </attribute>
   </mbean>

</server>
